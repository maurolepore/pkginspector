<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Package review tools • pkginspector</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Package review tools">
<meta property="og:description" content="Provides tools to facilitate an R package review.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pkginspector</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropenscilabs/pkginspector">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="pkginspector" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pkginspector" class="anchor"></a>pkginspector</h1></div>
<p>The goal of pkginspector is to facilitate <strong>rOpenSci</strong> package reviews.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install pkginspector from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"ropenscilabs/pkginspector"</span>)</a></code></pre></div>
</div>
<div id="ropensci-2018-pkginspector" class="section level2">
<h2 class="hasAnchor">
<a href="#ropensci-2018-pkginspector" class="anchor"></a>rOpenSci 2018: <code>pkginspector</code>
</h2>
<p><a href="https://twitter.com/big_bad_sam">Sam Albers</a>, <a href="https://twitter.com/fellgernon">Leonardo Collado-Torres</a>, <a href="https://twitter.com/mauro_lepore">Mauro Lepore</a>, <a href="https://twitter.com/jtrnyc">Joyce Robbins</a>, <a href="https://twitter.com/noamross">Noam Ross</a>, <a href="https://github.com/OmaymaS">Omayma Said</a></p>
<div id="function-calls" class="section level3">
<h3 class="hasAnchor">
<a href="#function-calls" class="anchor"></a>Function calls</h3>
<p>We add functionality to analyze function dependencies within a package to <code>pkginspector</code> with <code><a href="reference/rev_fn_summary.html">rev_fn_summary()</a></code>, which can be called on a package or on an class of <code>igraph</code> returned by <code>create_package_igraph()</code> in which functions are represented as nodes and function calls as directed edges.</p>
<p><code><a href="reference/rev_fn_summary.html">rev_fn_summary()</a></code> returns a data frame with the following columns:</p>
<ul>
<li><p><code>f_args</code>: names of all package functions and default arguments</p></li>
<li><p><code>called_by</code>: number of functions that directly depend on <code>f</code></p></li>
<li><p><code>calls</code>: number of functions directed called by <code>f</code></p></li>
<li><p><code>exported</code>: logical TRUE if the package exports <code>f</code></p></li>
<li><p><code>dependents</code>: number of functions that depend on <code>f</code> (functions that directly or indirectly call <code>f</code>)</p></li>
</ul>
<p>For example, we run <code><a href="reference/rev_fn_summary.html">rev_fn_summary()</a></code> on a default package (<code>viridisLite</code>) included with <code>pkginspector</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">res &lt;-<span class="st"> </span>pkginspector<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pkginspector/topics/rev_fn_summary">rev_fn_summary</a></span>(params<span class="op">$</span>pkgdir)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">f_name</th>
<th align="left">f_args</th>
<th align="right">calls</th>
<th align="right">called_by</th>
<th align="right">dependents</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cividis</td>
<td align="left">cividis (n, alpha = 1, begin = 0, end = 1, direction = 1)</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">inferno</td>
<td align="left">inferno (n, alpha = 1, begin = 0, end = 1, direction = 1)</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">magma</td>
<td align="left">magma (n, alpha = 1, begin = 0, end = 1, direction = 1)</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">plasma</td>
<td align="left">plasma (n, alpha = 1, begin = 0, end = 1, direction = 1)</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">viridis</td>
<td align="left">viridis (n, alpha = 1, begin = 0, end = 1, direction = 1, option = “D”)</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">viridisMap</td>
<td align="left">viridisMap (n = 256, alpha = 1, begin = 0, end = 1, direction = 1,</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Note that in order to run <code><a href="reference/rev_fn_summary.html">rev_fn_summary()</a></code>, the prebuilt package files must exist locally. For packages that exist on GitHub, the easiest way to get the files is to clone the repo that contains them. Another method is to download and unzip the package source file, such as the one found here: <code>https://cran.r-project.org/src/contrib/skimr_1.0.2.tar.gz</code></p>
<p>The package must also be installed through traditional methods.</p>
<p>Example code for running <code><a href="reference/rev_fn_summary.html">rev_fn_summary()</a></code> on an external package (after downloading):</p>
<pre><code>## Run rev_fn_summary() on the skimr package:
&gt; package_functions &lt;- rev_fn_summary("~/Downloads/skimr")
&gt; package_functions</code></pre>
</div>
<div id="argument-default-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#argument-default-usage" class="anchor"></a>Argument default usage</h3>
<p>We introduced the <code><a href="reference/rev_args.html">rev_args()</a></code> function that identifies all the arguments used in the functions of a given package and it’s main feature is a logical vector indicating if the default value of the argument is consistent across all uses of the argument. The idea is that this information can be useful to a reviewer because it is a proxy of the complexity of the package and potential source of confusion to users. Maybe the package uses the same argument name for two completely different things. Or maybe it’s a logical flag that sometimes is set to <code>TRUE</code> and others to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">ra &lt;-<span class="st"> </span>pkginspector<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pkginspector/topics/rev_args">rev_args</a></span>(params<span class="op">$</span>pkgdir)<span class="op">$</span>arg_df</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">arg_name</th>
<th align="right">n_functions</th>
<th align="left">default_consistent</th>
<th align="right">default_consistent_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">n</td>
<td align="right">6</td>
<td align="left">FALSE</td>
<td align="right">83.33333</td>
</tr>
<tr class="even">
<td align="left">alpha</td>
<td align="right">6</td>
<td align="left">TRUE</td>
<td align="right">100.00000</td>
</tr>
<tr class="odd">
<td align="left">begin</td>
<td align="right">6</td>
<td align="left">TRUE</td>
<td align="right">100.00000</td>
</tr>
<tr class="even">
<td align="left">end</td>
<td align="right">6</td>
<td align="left">TRUE</td>
<td align="right">100.00000</td>
</tr>
<tr class="odd">
<td align="left">direction</td>
<td align="right">6</td>
<td align="left">TRUE</td>
<td align="right">100.00000</td>
</tr>
<tr class="even">
<td align="left">option</td>
<td align="right">2</td>
<td align="left">TRUE</td>
<td align="right">100.00000</td>
</tr>
</tbody>
</table>
<p>The following plot visualizes which arguments are used in which functions.</p>
<p><img src="tools/readme/README-rev_args_mat-1.png" width="700"></p>
<div id="details" class="section level4">
<h4 class="hasAnchor">
<a href="#details" class="anchor"></a>Details</h4>
<p>The function <code><a href="reference/rev_args.html">rev_args(path = '.', exported_only = FALSE)</a></code> takes two arguments:</p>
<ul>
<li>
<code>path</code>: path to a package</li>
<li>
<code>exported_only</code>: logical indicating whether to focus only on the exported functions or not.</li>
</ul>
<p><code><a href="reference/rev_args.html">rev_args()</a></code> returns a list with two elements:</p>
<ul>
<li>
<code>arg_df</code>: a data.frame with columns
<ul>
<li>
<code>arg_name</code>: name of the argument</li>
<li>
<code>n_functions</code>: number of functions where the argument is used</li>
<li>
<code>default_consistent</code>: logical, is the argument default value consistent across all usages</li>
<li>
<code>default_consistent_percent</code>: [0, 100] indicating how consistent the default usage is when compared against the first use of the argument.</li>
</ul>
</li>
<li>
<code>arg_map</code>: a logical matrix with function names in the rows, argument names in the columns. It indicates where each argument is used.</li>
</ul>
</div>
<div id="example-output" class="section level4">
<h4 class="hasAnchor">
<a href="#example-output" class="anchor"></a>Example output</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">## Install viridisLite if needed</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">'viridisLite'</span>)</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">## Identify the location of the test version of viridisLite that's included</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">'viridisLite'</span>, <span class="dt">package =</span> <span class="st">'pkginspector'</span>, <span class="dt">mustWork =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">## Run rev_args() on the example package viridisLite that is included in pkginspector</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">pkginspector<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pkginspector/topics/rev_args">rev_args</a></span>(<span class="dt">path =</span> path, <span class="dt">exported_only =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; $arg_df</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;    arg_name n_functions default_consistent default_consistent_percent</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 1         n           5               TRUE                        100</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 2     alpha           5               TRUE                        100</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; 3     begin           5               TRUE                        100</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; 4       end           5               TRUE                        100</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; 5 direction           5               TRUE                        100</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; 6    option           1               TRUE                        100</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; $arg_map</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;            n alpha begin  end direction option</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; cividis TRUE  TRUE  TRUE TRUE      TRUE  FALSE</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; inferno TRUE  TRUE  TRUE TRUE      TRUE  FALSE</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt; magma   TRUE  TRUE  TRUE TRUE      TRUE  FALSE</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; plasma  TRUE  TRUE  TRUE TRUE      TRUE  FALSE</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; viridis TRUE  TRUE  TRUE TRUE      TRUE   TRUE</span></a></code></pre></div>
<p>In this example, the <code>n</code> argument doesn’t have a consistent default value in all 5 functions where it’s used.</p>
</div>
</div>
<div id="review-dependency-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#review-dependency-usage" class="anchor"></a>Review dependency usage</h3>
<p>New <code><a href="reference/rev_dependency_usage.html">rev_dependency_usage()</a></code> counts used functions from external packages. You may want to remove dependency on packages from which you use few functions.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">pkginspector<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pkginspector/topics/rev_dependency_usage">rev_dependency_usage</a></span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; &lt;U+2714&gt; Changing active project to 'C:/Users/LeporeM/Documents/Dropbox/git/pkginspector'</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; # A tibble: 13 x 3</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;    package         n functions                                            </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;                                                </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  1 devtools        1 as.package                                           </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  2 dplyr           6 select, data_frame, filter, group_by, summarize, n   </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  3 functionMap     1 map_r_package                                        </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  4 igraph          7 degree, vertex_attr, V, ego, graph_from_data_frame, ~</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  5 magrittr        1 %&gt;%                                                  </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  6 purrr           1 map                                                  </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  7 rmarkdown       1 render                                               </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  8 shiny           1 runApp                                               </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  9 stats           1 setNames                                             </span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 10 tidyr           1 separate                                             </span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 11 usethis         1 proj_get                                             </span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; 12 utils           2 globalVariables, lsf.str                             </span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; 13 visNetwork      8 visIgraph, visPhysics, visLayout, visEdges, visOptio~</span></a></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ropenscilabs/pkginspector">https://​github.com/​ropenscilabs/​pkginspector</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropenscilabs/pkginspector/issues">https://​github.com/​ropenscilabs/​pkginspector/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Albers <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/ropenscilabs/pkginspector"><img src="https://travis-ci.org/ropenscilabs/pkginspector.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/ropenscilabs/pkginspector"><img src="https://codecov.io/gh/ropenscilabs/pkginspector/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sam Albers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
